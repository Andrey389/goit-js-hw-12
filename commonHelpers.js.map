{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getapiImges(query, currentPage) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = {\n    key: '43244961-2cc0a4f4473f9c50538fea30b',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n  const url = `${BASE_URL}?${params}`;\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'tags',\n  captionsDelay: 250,\n});\n\nfunction articleTemplate(obj) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = obj;\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      lodind=\"lazy\" \n      class=\"gallery-image\" \n      src=\"${webformatURL}\" \n      alt=\"Image ${tags}\" \n      />\n  </a>\n  <div class=\"descrip-gallery\">\n    <ul class=\"descrip-img\">\n      <li class=\"descrip-item\">Likes</li>\n      <li class=\"descrip-item\">${likes}</li>\n    </ul>\n    <ul class=\"descrip-img\">\n      <li class=\"descrip-item\">Views</li>\n      <li class=\"descrip-item\">${views}</li>\n    </ul>\n    <ul class=\"descrip-img\">\n      <li class=\"descrip-item\">Comments</li>\n      <li class=\"descrip-item\">${comments}</li>\n    </ul>\n    <ul class=\"descrip-img\">\n      <li class=\"descrip-item\">Downloads</li>\n      <li class=\"descrip-item\">${downloads}</li>\n    </ul>\n  </div>\n</li>`;\n}\n\nfunction articlesTemplate(arr) {\n  return arr.map(articleTemplate).join('');\n}\n\nexport function renderImages(arr) {\n  const markup = articlesTemplate(arr);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n  console.log(markup);\n}\n","import iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getapiImges } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst refs = {\n  formEl: document.querySelector('.form-search'),\n  inputEl: document.querySelector('.input-text'),\n  gallery: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n  loaderendEl: document.querySelector('.loaderend'),\n  btnLoadMore: document.querySelector('.load-btn-submit'),\n};\n\nlet query;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\n\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  query = event.target.elements.input.value.trim();\n  refs.gallery.innerHTML = '';\n  currentPage = 1;\n\n  if (!query) {\n    iziToast.error({\n      title: 'Error',\n      message: '❌ Please enter a search query!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  try {\n    showLoader();\n    const data = await getapiImges(query, currentPage);\n\n    maxPage = Math.ceil(data.totalHits / pageSize);\n\n    renderImages(data.hits);\n  } catch {\n    console.log(err);\n  }\n\n  hidenLoader();\n\n  checkBtnStatus();\n  event.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  showLoader();\n  try {\n    const data = await getapiImges(query, currentPage);\n\n    renderImages(data.hits);\n  } catch {\n    console.log(err);\n  }\n\n  checkBtnStatus();\n  hidenLoader();\n}\n\nfunction showLoadMore() {\n  refs.btnLoadMore.classList.remove('hidden');\n}\n\nfunction hidenLoadMore() {\n  refs.btnLoadMore.classList.add('hidden');\n}\n\nfunction showLoader() {\n  refs.loaderEl.classList.remove('hidden');\n}\n\nfunction hidenLoader() {\n  refs.loaderEl.classList.add('hidden');\n}\n\nfunction checkBtnStatus() {\n  if (currentPage >= maxPage) {\n    loaderElStatus();\n    hidenLoadMore();\n  } else {\n    loaderElStatus();\n    showLoadMore();\n  }\n}\n\nfunction showLoaderend() {\n  refs.loaderendEl.classList.remove('hidden');\n}\n\nfunction hidenLoaderend() {\n  refs.loaderendEl.classList.add('hidden');\n}\n\nfunction loaderElStatus() {\n  if (currentPage >= maxPage) {\n    showLoaderend();\n  } else {\n    hidenLoaderend();\n  }\n}\n"],"names":["getapiImges","query","currentPage","BASE_URL","params","url","axios","gallery","lightbox","SimpleLightbox","articleTemplate","obj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","articlesTemplate","arr","renderImages","markup","refs","maxPage","pageSize","onFormSubmit","onLoadMoreClick","event","iziToast","showLoader","data","hidenLoader","checkBtnStatus","showLoadMore","hidenLoadMore","loaderElStatus","showLoaderend","hidenLoaderend"],"mappings":"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"}